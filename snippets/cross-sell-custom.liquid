{% comment %}
============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============

Please beware that editting this file could break your site as it's referenced in your theme's main theme.liquid file!

Also, if you're testing changes, please do so on a duplicate theme to avoid downtime for your users!

Instructions:
1) create a file named 'cross-sell-custom' inside of your Snippets folder.
Once created it SHOULD say 'cross-sell-custom.liquid' IF NOT, rename it.
2) make sure the 3 lines of code below are added BEFORE the </head> element of your theme.liquid file (or main theme file)

<!-- Cross Sell custom code start. Do not change -->
{%include 'cross-sell-custom'%}
<!-- Cross Sell custom code end. Do not change -->

3) Make sure you to SAVE the changes made to your theme.liquid file
4) Have Cross Sell's Settings -> Display Settings set to "custom" theme, and activate the carousel feature if needed.
5) Save your Settings

Have problems or feedback? DON'T PANIC! Email us at support@csell.co or check out support site -> https://help.csell.co

============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============
{% endcomment %}

<style type="text/css">
  h3.crossselltitle{margin:25px 0;text-align: center;}
  .cross-sell{overflow:hidden;list-style-type:none;margin:0;padding:0;clear:both;text-align:center;}
  .cross-sell *{font-size:13px; text-align:center; padding:0;}
  .cross-sell h4{border:none;margin:5px 0 0 0;line-height:1.5;}
  .cross-sell div.image{height:180px;}
  .cross-sell li{float: none;display:inline-block;vertical-align: text-top;padding:0 0 10px 0;margin:0 14px 30px 0;position:relative;width:172px;}
  .cross-sell li:last-child{margin-right:0;}
  .cross-sell li .image{}
  .cross-sell li .image img{margin:0px 0 10px 0px;float:left;width:100%;}
  .cross-sell li .producttitle{float:left;padding:5px 0;width:100%;min-height:56px;}
  .cross-sell li a{text-decoration:none;font-size:115%;line-height:20px;padding:5px;}
  .cross-sell li .money a{font-size:180%;float:left;text-align:center; padding:5px 0;width:100%;}
  .cross-sell .xs-compare-at-price{padding-right: 5px;display: inline-block;text-decoration: line-through;}
  .cross-sell .xs-vendor-name{padding:5px 0;width:100%;display:inline-block;}
  .cs-clearfix:after {content: "."; visibility: hidden; display: block; height: 0; clear: both;}
</style>
<script>
  window.xsellCustom = window.xsellCustom || {};
  window.xsellCustom.theme_settings = window.xsellCustom.theme_settings || {};
  window.xsellCustom.buildxsellsoutput = function(xsellitems, numproducts){
   	var xsmustbeavailable = xsellSettings.xsmustbeavailable;
   	var xshideifincart = xsellSettings.xshideifincart;
   	var xsdisplaycompareatprice = xsellSettings.xsdisplaycompareatprice;
   	var xsdisplaysalebadge = xsellSettings.xsdisplaysalebadge;
   	var xsdisplaypricevarieslabel = xsellSettings.xsdisplaypricevarieslabel;
   	var xsdisplayvendor = xsellSettings.xsdisplayvendor;
    var xsimagesize = 'large';
    var xsvendoroutput = '';
    var xspricevarieslabel = '';
    var xscompareatprice = '';
    var xscompareatpricestring = '';
  	var xssalepricestring = '';
   	var xspriceoutput = '';
    var xssalebadge = '<span class="price__badge price__badge--sale" aria-hidden="true"><span>'+ theme.strings.sale +'</span></span>';
  	var xssalebadgeoutput = '';
    var saleclass = ' xs-sale';
    var fromlabel = '<em>from</em>';
    var xsprice = '';

    // add custom variables here

    for(var x=0; x < numproducts; x++) {
    	var xsproductdata = xsellitems[x];
          var isOnSale = xsproductdata.compare_at_price > xsproductdata.price;

      if(xsproductdata.images.length > 1) {
        var csimage = xsproductdata.images.find(function (image) {
        	return (image.indexOf('_GH.') > 0) || (image.indexOf('_ZH') < 0) || (image.indexOf('_GH_') > 0);
        });
        csimage = xsellLib.productimageurls(csimage);
        var csimagetwo = xsellLib.productimageurls(xsproductdata.images[1]);
      }
      else if(xsproductdata.images.length == 1) {
        var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
        var csimagetwo = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
      }
      else {
        var csimage = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
        var csimagetwo = csimage;
      }
      if(xsdisplayvendor) {
        xsvendoroutput = '<div class="xs-vendor-name"><a href="' + xsproductdata.url +'">' + xsproductdata.vendor + '</a></div>';
      }

      xsprice = xsellLib.xsformatMoney(xsproductdata.varies ? xsproductdata.price_min : xsproductdata.price, '{{ shop.money_format }}');
      xspriceoutput = '<div class="price__regular"><dd><span class="price-item price-item--regular">' + xsprice + '</span></dd></div>';
      if(xsdisplaycompareatprice)
      {

      if(xsproductdata.compare_at_price > xsproductdata.price) {
        if(xsproductdata.price_varies) {
            xspricevarieslabel = 'from: ';
        	}
        	else {
          	xspricevarieslabel = '';
        	}
             xscompareatprice = xsellLib.xsformatMoney(xsproductdata.price_varies ? xsproductdata.compare_at_price_min : xsproductdata.compare_at_price, '{{ shop.money_format }}');
            xscompareatpricestring = '<span class="xs-compare-at-price">' + xscompareatprice + '</span>';
            xssalepricestring = '<span class="xs-sale-price"><a href="' + xsproductdata.url +'">' + xsprice + '</a></span>';
            xspriceoutput = '<div class="price__sale"><dd><span class="price-item price-item--sale">' + xsprice + ' </span></dd>'
                            	+ '<div class="price__compare">'
                                	+ '<dd>'
                                  		+ '<s class="price-item price-item--regular">' + xscompareatprice + '</s>'
                                    + '</dd>'
                                + '</div>'
  							+ '</div>';
        }
      }

      if(xsdisplaysalebadge) {
        if(xsproductdata.compare_at_price > xsproductdata.price) {
          xssalebadgeoutput = xssalebadge;
        }
        else {
          xssalebadgeoutput = '';
        }
      }
        
        function getPriceClasses() {
          var classesString = '';
          classesString += xsproductdata.available ? '' : 'price--sold-out ';
          classesString += xsproductdata.compare_at_price > xsproductdata.price ? 'price--on-sale' : '';
        	return classesString;
        }

      xsellLib.xselloutput += '<li class="grid__item small--one-half medium-up--one-quarter" data-xsorder="' + xsproductdata["order"] + '">'
                           		+ '<div class="grid-view-item product-card">'
      					   			+ '<a class="grid-view-item__link grid-view-item__image-container full-width-link" href="'+xsproductdata.url+'"><span class="visually-hidden">'+xsproductdata.title+'</span></a>'
                           			+ '<div class="product-card__image-with-placeholder-wrapper" data-image-with-placeholder-wrapper>'
      									+ '<div class="grid-view-item__image-wrapper product-card__image-wrapper">'
      										+ '<div style="padding-top: 108%;">'
      											+ '<img src="' + csimage.replace('_large.', '_540x583_crop_center.') + '" class="grid-view-item__image" />'
      										+ '</div>'
      									+ '</div>'
      									+ '<div class="placeholder-background placeholder-background--animation" data-image-placeholder></div>'
                           			+ '</div>'
      								+ '<div class="h4 grid-view-item__title product-card__title" aria-hidden="true">'+ xsproductdata.title +'</div>'
      								+ '<dl class="price price--listing '+ getPriceClasses() +'">'
      									+ xspriceoutput
      									+ '<div class="price__badges price__badges--listing">'
      										+ '<span class="price__badge price__badge--sold-out">'
      											+ '<span>'+ theme.strings.soldOut +'</span>'
      										+ '</span>'
      										+ xssalebadgeoutput
      									+ '</div>'
      								+ '</dl>'
								+ '</div>'
                           + '</li>';
 		}

    if(xsellLib.xselloutput != ''){
      var xsellDiv = document.createElement('div');
      xsellDiv.innerHTML = '<div class="section-header text-center"><h2>' + xsellLib.settings.xstitle + '</h2></div><ul class="grid grid--uniform grid--view-items">' + xsellLib.xselloutput + '</ul>'; //output here
      var crossSellEl = document.getElementById('cross-sell');
      crossSellEl.className = 'index-section page-width product-recommendations__inner border-top';
      crossSellEl.appendChild(xsellDiv);
    }
  }
</script>